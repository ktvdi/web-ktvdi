{% extends 'base.html' %}

{% block content %}
<section class="relative bg-white pt-16 pb-24 overflow-hidden">
    <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-brand-surface rounded-full blur-3xl opacity-60 -mr-20 -mt-20"></div>
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="flex flex-col lg:flex-row items-center gap-16">
            <div class="flex-1 text-center lg:text-left">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-blue-50 border border-blue-100 text-brand-blue text-xs font-bold rounded-full mb-6 shadow-sm">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    Menyongsong Era Baru Penyiaran
                </div>
                <h1 class="text-4xl md:text-6xl font-extrabold text-brand-navy leading-tight mb-6">
                    Selamat Datang di <br> 
                    <span class="text-glossy">Komunitas TV Digital Indonesia</span>
                </h1>
                <p class="text-slate-500 text-lg mb-8 max-w-2xl mx-auto lg:mx-0 leading-relaxed text-justify">
                    Sudah saatnya kita meninggalkan era analog "semut" dan beralih ke siaran yang jernih, canggih, dan merata. KTVDI hadir bukan sekadar database, tapi gerakan masyarakat untuk memastikan hak informasi publik terpenuhi. Temukan frekuensi MUX di daerahmu dan jadilah bagian dari revolusi digital.
                </p>
                <div class="flex flex-wrap gap-4 justify-center lg:justify-start">
                    <a href="/daftar-siaran" class="px-8 py-4 bg-brand-blue text-white font-bold rounded-xl shadow-xl hover:bg-blue-700 transition flex items-center gap-2 transform hover:-translate-y-1">
                        <i class="fa-solid fa-tower-broadcast"></i> Cek Sinyal Digital
                    </a>
                    {% if not session.get('user') %}
                    <a href="/register" class="px-8 py-4 bg-white border border-slate-200 text-brand-navy font-bold rounded-xl hover:border-brand-blue hover:text-brand-blue transition flex items-center gap-2">
                        <i class="fa-solid fa-user-plus"></i> Gabung Komunitas
                    </a>
                    {% endif %}
                </div>
            </div>
            
            <div class="flex-1 w-full max-w-md">
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-100 text-center hover:border-brand-blue transition group">
                        <div class="text-4xl font-extrabold text-brand-navy group-hover:text-brand-blue transition">{{ stats.wilayah }}</div>
                        <div class="text-xs text-slate-400 font-bold uppercase mt-1">Wilayah Terjangkau</div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-100 text-center hover:border-brand-blue transition group">
                        <div class="text-4xl font-extrabold text-brand-navy group-hover:text-brand-blue transition">{{ stats.mux }}</div>
                        <div class="text-xs text-slate-400 font-bold uppercase mt-1">MUX Beroperasi</div>
                    </div>
                    <div class="col-span-2 bg-brand-navy p-8 rounded-2xl shadow-xl text-center text-white relative overflow-hidden group">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-brand-blue rounded-full blur-3xl opacity-20 group-hover:opacity-40 transition"></div>
                        <div class="relative z-10">
                            <div class="text-6xl font-extrabold text-brand-sky mb-2 group-hover:scale-110 transition duration-300">{{ stats.channel }}</div>
                            <div class="text-sm text-slate-300 font-bold uppercase tracking-widest">Total Channel Nasional</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-20 bg-brand-surface border-y border-slate-200">
    <div class="max-w-7xl mx-auto px-4">
        <div class="flex justify-between items-end mb-10">
            <div>
                <span class="text-brand-blue font-bold text-sm uppercase tracking-wider">Official Stream</span>
                <h2 class="text-3xl font-extrabold text-brand-navy mt-2">Nonton TV Digital Online</h2>
            </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="tv-grid"></div>
    </div>
</section>

<section class="py-24 bg-white">
    <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-16">
            <span class="text-brand-blue font-bold text-sm uppercase tracking-wider bg-blue-50 px-3 py-1 rounded-full">Literasi Digital</span>
            <h2 class="text-3xl font-extrabold text-brand-navy mt-4">Panduan & Solusi Masyarakat</h2>
            <p class="text-slate-500 max-w-2xl mx-auto mt-2">Pengetahuan dasar yang wajib diketahui setiap pemilik TV di Indonesia.</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-start">
            <div class="space-y-4">
                <h3 class="text-xl font-bold text-brand-navy mb-4 border-b border-slate-100 pb-2">Pertanyaan Umum</h3>
                <details class="group bg-brand-surface p-5 rounded-2xl border border-slate-200">
                    <summary class="flex justify-between items-center font-bold text-brand-navy cursor-pointer list-none">Apa itu MUX?<span class="text-brand-blue"><i class="fa-solid fa-chevron-down"></i></span></summary>
                    <p class="text-slate-600 text-sm mt-4 text-justify">MUX ibarat "Bus" yang mengangkut banyak penumpang (Channel TV). Satu frekuensi MUX bisa membawa 5-10 channel sekaligus.</p>
                </details>
                <details class="group bg-brand-surface p-5 rounded-2xl border border-slate-200">
                    <summary class="flex justify-between items-center font-bold text-brand-navy cursor-pointer list-none">Dimana Nonton Piala Dunia 2026?<span class="text-brand-blue"><i class="fa-solid fa-chevron-down"></i></span></summary>
                    <p class="text-slate-600 text-sm mt-4 text-justify">Hak siar <strong>Piala Dunia 2026</strong> untuk jalur terestrial (UHF gratis) dipegang oleh <strong>TVRI</strong>. Pastikan antena Anda mengarah ke pemancar TVRI terdekat.</p>
                </details>
                <details class="group bg-brand-surface p-5 rounded-2xl border border-slate-200">
                    <summary class="flex justify-between items-center font-bold text-brand-navy cursor-pointer list-none">Kenapa Sinyal Saya Sering Hilang?<span class="text-brand-blue"><i class="fa-solid fa-chevron-down"></i></span></summary>
                    <p class="text-slate-600 text-sm mt-4 text-justify">Penyebab utama: Arah antena salah, kabel rusak, atau jack konektor karatan. Solusi: Gunakan antena outdoor dan kabel RG6 berkualitas.</p>
                </details>
            </div>

            <div>
                <h3 class="text-xl font-bold text-brand-navy mb-4 border-b border-slate-100 pb-2">Butuh Bantuan?</h3>
                <div class="bg-brand-navy text-white p-8 rounded-3xl relative overflow-hidden shadow-2xl">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-brand-blue rounded-full blur-3xl opacity-20 -mr-10 -mt-10"></div>
                    <div class="relative z-10 text-center">
                        <p class="text-xs text-slate-300 mb-4">Masih bingung caranya?</p>
                        <a href="https://www.instagram.com/ktvdi.id" target="_blank" class="inline-block w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3.5 rounded-xl transition flex items-center justify-center gap-2 shadow-lg">
                            <i class="fa-brands fa-instagram text-xl"></i> DM Komunitas di Instagram
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const channels = [
            {name: "RTV HD-2", url: "https://rtvstream.rtv.co.id:4555/hls/rtv.m3u8"},
            {name: "Matrix TV Jogja", url: "https://stream.matrixtv.id/hls/stream.m3u8"},
            {name: "Berita Satu", url: "https://beritasatu.secureswiftcontent.com/han/beritasatu/bsatu10008/srtoutput/manifest.m3u8"},
            {name: "Nusantara TV", url: "https://nusantaratv.siar.us/nusantaratv/live/playlist.m3u8"},
            {name: "Semarang TV", url: "http://36.94.24.229/0.m3u8"},
            {name: "Caruban TV", url: "https://stream.carubantv.id/hls/stream.m3u8"},
            {name: "Stara TV Malang", url: "https://malang.staratv.id/hls/stream.m3u8"},
            {name: "TVRI Nasional", url: "https://ott-balancer.tvri.go.id/live/eds/Nasional/hls/Nasional.m3u8"},
            {name: "Garuda TV", url: "https://hgmtv.com:19360/garudatvlivestreaming/garudatvlivestreaming.m3u8"},
            {name: "Kompas TV HD", url: "http://103.46.11.106:9981/stream/channelid/1691704072?ticket=933C4850FCC4D9EE7E8D7D37D095694F55914124&profile=pass"},
            {name: "Rasika USA TV", url: "https://rasika.siar.us/live/rasika.m3u8"}
        ];

        const grid = document.getElementById('tv-grid');
        channels.forEach((ch, idx) => {
            const div = document.createElement('div');
            div.className = "bg-white rounded-2xl overflow-hidden shadow-sm border border-slate-200 hover:shadow-xl transition group relative";
            div.innerHTML = `
                <div class="relative aspect-video bg-black group-hover:scale-[1.02] transition duration-500">
                    <video id="vid-${idx}" class="w-full h-full object-cover" controls playsinline muted></video>
                    <span class="absolute top-3 left-3 bg-red-600 text-white text-[10px] font-bold px-2 py-1 rounded shadow animate-pulse z-10">LIVE</span>
                </div>
                <div class="p-4">
                    <h3 class="font-bold text-brand-navy text-sm truncate">${ch.name}</h3>
                </div>
            `;
            grid.appendChild(div);
            const video = document.getElementById(`vid-${idx}`);
            if(Hls.isSupported()) { const h = new Hls(); h.loadSource(ch.url); h.attachMedia(video); }
            else if (video.canPlayType('application/vnd.apple.mpegurl')) { video.src = ch.url; }
        });
    });
</script>
{% endblock %}
