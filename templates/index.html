{% extends 'base.html' %}

{% block content %}

<section class="relative bg-white pt-12 pb-24 overflow-hidden">
    <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-brand-surface rounded-full blur-3xl opacity-70 -mr-20 -mt-20"></div>
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="flex flex-col lg:flex-row items-center gap-12">
            
            <div class="flex-1 text-center lg:text-left">
                <div class="inline-flex items-center gap-2 px-3 py-1 bg-white border border-brand-blue/20 text-brand-blue text-xs font-bold rounded-full mb-6 shadow-sm">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    Menyambut Piala Dunia 2026
                </div>

                <h1 class="text-4xl md:text-6xl font-extrabold text-brand-navy leading-tight mb-6">
                    Selamat Datang di <br>
                    <span class="bg-clip-text text-transparent bg-gradient-to-r from-brand-blue via-sky-400 to-brand-blue bg-[length:200%_auto] animate-[marquee_3s_linear_infinite]">
                        Komunitas TV Digital Indonesia
                    </span>
                </h1>

                <div class="text-slate-500 text-sm md:text-base leading-relaxed mb-8 max-w-2xl mx-auto lg:mx-0 text-justify space-y-4">
                    <p>
                        KTVDI hadir sebagai platform edukasi dan informasi terdepan untuk masyarakat Indonesia dalam masa transisi ke penyiaran digital. Kami berkomitmen memberikan panduan teknis yang mudah dipahami agar setiap rumah tangga dapat menikmati hak siaran publik yang layak.
                    </p>
                    <p>
                        <strong>Siapkah Anda untuk World Cup 2026?</strong> Ajang olahraga terbesar dunia akan segera hadir. Pastikan perangkat TV Anda sudah mendukung teknologi <strong>DVB-T2</strong> untuk menangkap siaran berkualitas High Definition (HD) yang tajam, jernih, dan tanpa biaya bulanan (Gratis).
                    </p>
                    <p>
                        Gunakan data frekuensi MUX kami yang mencakup seluruh wilayah dari Sabang hingga Merauke untuk mengarahkan antena UHF Anda secara presisi. Mari wujudkan pemerataan informasi digital bagi seluruh rakyat Indonesia.
                    </p>
                </div>

                <div class="flex flex-wrap gap-4 justify-center lg:justify-start">
                    <a href="{{ url_for('daftar_siaran') }}" class="px-8 py-3.5 bg-brand-blue hover:bg-brand-navy text-white font-bold rounded-xl shadow-xl shadow-blue-500/30 transition transform hover:-translate-y-1 flex items-center gap-2">
                        <i class="fa-solid fa-tower-broadcast"></i> Cek Frekuensi MUX
                    </a>
                    {% if not session.get('user') %}
                    <a href="{{ url_for('register') }}" class="px-8 py-3.5 bg-white border border-slate-300 text-slate-700 hover:border-brand-blue hover:text-brand-blue font-bold rounded-xl transition flex items-center gap-2">
                        <i class="fa-solid fa-users"></i> Gabung Komunitas
                    </a>
                    {% endif %}
                </div>
            </div>
            
            <div class="flex-1 w-full max-w-md">
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-100 text-center hover:border-brand-blue transition">
                        <div class="text-3xl font-extrabold text-brand-blue">{{ jumlah_wilayah_layanan }}</div>
                        <div class="text-xs text-slate-400 font-bold uppercase mt-1">Wilayah Layanan</div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-100 text-center hover:border-brand-blue transition">
                        <div class="text-3xl font-extrabold text-brand-blue">{{ jumlah_penyelenggara_mux }}</div>
                        <div class="text-xs text-slate-400 font-bold uppercase mt-1">MUX Aktif</div>
                    </div>
                    <div class="col-span-2 bg-brand-navy p-8 rounded-xl shadow-xl text-center text-white relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-20 h-20 bg-brand-blue rounded-full blur-2xl opacity-20"></div>
                        <div class="text-5xl font-extrabold text-sky-400 mb-2">{{ jumlah_siaran }}</div>
                        <div class="text-sm text-slate-300 font-bold uppercase tracking-widest">Total Channel Terdata</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-16 bg-slate-50 border-t border-slate-200">
    <div class="max-w-7xl mx-auto px-4">
        <div class="flex justify-between items-end mb-8">
            <div>
                <h2 class="text-2xl font-bold text-brand-navy">Siaran Langsung TV Digital</h2>
                <p class="text-sm text-slate-500">Pantau kualitas siaran streaming dengan teknologi adaptif bitrate.</p>
            </div>
            <div class="hidden md:block">
                <span class="text-xs bg-white border border-slate-200 px-3 py-1 rounded-full text-slate-600 font-bold">
                    <i class="fa-solid fa-circle-check text-green-500 mr-1"></i> Official Stream
                </span>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="bg-white rounded-xl overflow-hidden shadow-sm border border-slate-200 hover:shadow-lg transition">
                <div class="relative aspect-video bg-black">
                    <video id="vid-ntv" class="w-full h-full" controls poster="https://source.unsplash.com/800x450/?news"></video>
                    <span class="absolute top-2 left-2 bg-red-600 text-white text-[9px] font-bold px-2 py-0.5 rounded shadow">LIVE</span>
                </div>
                <div class="p-4 border-t border-slate-100">
                    <h3 class="font-bold text-slate-800 text-sm">Nusantara TV</h3>
                    <p class="text-[10px] text-slate-500">Berita Nasional</p>
                </div>
            </div>
            <div class="bg-white rounded-xl overflow-hidden shadow-sm border border-slate-200 hover:shadow-lg transition">
                <div class="relative aspect-video bg-black">
                    <video id="vid-matrix" class="w-full h-full" controls poster="https://source.unsplash.com/800x450/?soccer"></video>
                    <span class="absolute top-2 left-2 bg-red-600 text-white text-[9px] font-bold px-2 py-0.5 rounded shadow">LIVE</span>
                </div>
                <div class="p-4 border-t border-slate-100">
                    <h3 class="font-bold text-slate-800 text-sm">Matrix TV</h3>
                    <p class="text-[10px] text-slate-500">Olahraga & Hiburan</p>
                </div>
            </div>
            <div class="bg-white rounded-xl overflow-hidden shadow-sm border border-slate-200 hover:shadow-lg transition">
                <div class="relative aspect-video bg-black">
                    <video id="vid-bsatu" class="w-full h-full" controls poster="https://source.unsplash.com/800x450/?business"></video>
                    <span class="absolute top-2 left-2 bg-red-600 text-white text-[9px] font-bold px-2 py-0.5 rounded shadow">LIVE</span>
                </div>
                <div class="p-4 border-t border-slate-100">
                    <h3 class="font-bold text-slate-800 text-sm">BTV</h3>
                    <p class="text-[10px] text-slate-500">Ekonomi & Bisnis</p>
                </div>
            </div>
            <div class="bg-white rounded-xl overflow-hidden shadow-sm border border-slate-200 hover:shadow-lg transition">
                <div class="relative aspect-video bg-black">
                    <video id="vid-rtv" class="w-full h-full" controls poster="https://source.unsplash.com/800x450/?cartoon"></video>
                    <span class="absolute top-2 left-2 bg-red-600 text-white text-[9px] font-bold px-2 py-0.5 rounded shadow">LIVE</span>
                </div>
                <div class="p-4 border-t border-slate-100">
                    <h3 class="font-bold text-slate-800 text-sm">RTV HD</h3>
                    <p class="text-[10px] text-slate-500">Keluarga & Anak</p>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const streams = {
            'vid-ntv': 'https://nusantaratv.siar.us/nusantaratv/live/playlist.m3u8',
            'vid-matrix': 'https://stream.matrixtv.id/hls/stream.m3u8',
            'vid-bsatu': 'https://beritasatu.secureswiftcontent.com/han/beritasatu/bsatu10008/srtoutput/manifest.m3u8',
            'vid-rtv': 'https://rtvstream.rtv.co.id:4555/hls/rtv.m3u8'
        };
        for (const [id, url] of Object.entries(streams)) {
            const v = document.getElementById(id);
            if(Hls.isSupported()) {
                const hls = new Hls(); hls.loadSource(url); hls.attachMedia(v);
            } else if (v.canPlayType('application/vnd.apple.mpegurl')) {
                v.src = url;
            }
        }
    });
</script>

{% endblock %}
