{% extends 'base.html' %}

{% block content %}
<section class="relative bg-white pt-16 pb-24 overflow-hidden">
    <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-brand-surface rounded-full blur-3xl opacity-60 -mr-20 -mt-20"></div>
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="flex flex-col lg:flex-row items-center gap-16">
            <div class="flex-1 text-center lg:text-left">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-blue-50 border border-blue-100 text-brand-blue text-xs font-bold rounded-full mb-6 shadow-sm">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    Revolusi Penyiaran Indonesia
                </div>
                <h1 class="text-4xl md:text-6xl font-extrabold text-brand-navy leading-tight mb-6">
                    Selamat Datang di <br> 
                    <span class="text-glossy">Komunitas TV Digital Indonesia</span>
                </h1>
                <p class="text-slate-500 text-lg mb-8 max-w-2xl mx-auto lg:mx-0 leading-relaxed text-justify">
                    Dari Sabang sampai Merauke, saatnya kita tinggalkan era analog yang penuh "semut". KTVDI hadir sebagai jembatan informasi agar setiap keluarga Indonesia mendapatkan hak siaran yang jernih, canggih, dan gratis. Bergabunglah bersama ribuan kontributor lainnya untuk memetakan sinyal di daerahmu.
                </p>
                <div class="flex flex-wrap gap-4 justify-center lg:justify-start">
                    <a href="/daftar-siaran" class="px-8 py-4 bg-brand-blue text-white font-bold rounded-xl shadow-xl hover:bg-blue-700 transition flex items-center gap-2 transform hover:-translate-y-1">
                        <i class="fa-solid fa-tower-broadcast"></i> Cek Sinyal Digital
                    </a>
                    {% if not session.get('user') %}
                    <a href="/register" class="px-8 py-4 bg-white border border-slate-200 text-brand-navy font-bold rounded-xl hover:border-brand-blue hover:text-brand-blue transition flex items-center gap-2">
                        <i class="fa-solid fa-user-plus"></i> Gabung Komunitas
                    </a>
                    {% endif %}
                </div>
            </div>
            
            <div class="flex-1 w-full max-w-md">
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-100 text-center hover:border-brand-blue transition group">
                        <div class="text-4xl font-extrabold text-brand-navy group-hover:text-brand-blue transition">{{ stats.wilayah }}</div>
                        <div class="text-xs text-slate-400 font-bold uppercase mt-1">Wilayah Terjangkau</div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-100 text-center hover:border-brand-blue transition group">
                        <div class="text-4xl font-extrabold text-brand-navy group-hover:text-brand-blue transition">{{ stats.mux }}</div>
                        <div class="text-xs text-slate-400 font-bold uppercase mt-1">MUX Beroperasi</div>
                    </div>
                    <div class="col-span-2 bg-brand-navy p-8 rounded-2xl shadow-xl text-center text-white relative overflow-hidden group">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-brand-blue rounded-full blur-3xl opacity-20 group-hover:opacity-40 transition"></div>
                        <div class="relative z-10">
                            <div class="text-6xl font-extrabold text-brand-sky mb-2 group-hover:scale-110 transition duration-300">{{ stats.channel }}</div>
                            <div class="text-sm text-slate-300 font-bold uppercase tracking-widest">Total Channel Nasional</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-20 bg-brand-surface border-y border-slate-200">
    <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-12">
            <span class="text-brand-blue font-bold text-sm uppercase tracking-wider bg-blue-50 px-3 py-1 rounded-full">Official Stream</span>
            <h2 class="text-3xl font-extrabold text-brand-navy mt-4">Nonton TV Digital Online</h2>
            <p class="text-slate-500 mt-2">Streaming resmi saluran DVB-T2 Indonesia.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="tv-grid"></div>
    </div>
</section>

<section class="py-24 bg-white">
    <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-16">
            <span class="text-brand-blue font-bold text-sm uppercase tracking-wider bg-blue-50 px-3 py-1 rounded-full">Literasi Digital</span>
            <h2 class="text-3xl font-extrabold text-brand-navy mt-4">Panduan & Solusi Masyarakat</h2>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-start">
            <div class="space-y-4">
                <details class="group bg-brand-surface p-5 rounded-2xl border border-slate-200 open:border-brand-blue transition">
                    <summary class="flex justify-between items-center font-bold text-brand-navy cursor-pointer list-none">
                        Apa itu MUX (Multiplexing)?
                        <span class="transition group-open:rotate-180 text-brand-blue"><i class="fa-solid fa-chevron-down"></i></span>
                    </summary>
                    <p class="text-slate-600 text-sm mt-4 text-justify leading-relaxed">
                        MUX ibarat sebuah "Bus" yang mengangkut banyak penumpang (Channel TV). Dalam satu frekuensi MUX (misal UHF 42), bisa membawa 5 hingga 10 channel sekaligus. Inilah efisiensi teknologi digital.
                    </p>
                </details>

                <details class="group bg-brand-surface p-5 rounded-2xl border border-slate-200 open:border-brand-blue transition">
                    <summary class="flex justify-between items-center font-bold text-brand-navy cursor-pointer list-none">
                        Dimana Nonton Piala Dunia 2026?
                        <span class="transition group-open:rotate-180 text-brand-blue"><i class="fa-solid fa-chevron-down"></i></span>
                    </summary>
                    <p class="text-slate-600 text-sm mt-4 text-justify leading-relaxed">
                        Kabar gembira! Hak siar <strong>Piala Dunia 2026</strong> untuk jalur terestrial (UHF gratis) dipegang oleh <strong>TVRI</strong>. Pastikan antena Anda mengarah ke pemancar TVRI terdekat untuk menikmati pertandingan dengan kualitas HD tanpa diacak.
                    </p>
                </details>

                <details class="group bg-brand-surface p-5 rounded-2xl border border-slate-200 open:border-brand-blue transition">
                    <summary class="flex justify-between items-center font-bold text-brand-navy cursor-pointer list-none">
                        Kenapa Sinyal Saya Sering Hilang?
                        <span class="transition group-open:rotate-180 text-brand-blue"><i class="fa-solid fa-chevron-down"></i></span>
                    </summary>
                    <p class="text-slate-600 text-sm mt-4 text-justify leading-relaxed">
                        Penyebab utama biasanya: (1) Arah antena kurang tepat, (2) Kabel antena sudah tua/rusak, atau (3) Jack konektor karatan. Solusi terbaik: Gunakan antena outdoor berkualitas dengan kabel RG6 baru.
                    </p>
                </details>
            </div>

            <div>
                <div class="bg-brand-navy text-white p-8 rounded-3xl relative overflow-hidden shadow-2xl">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-brand-blue rounded-full blur-3xl opacity-20 -mr-10 -mt-10"></div>
                    <div class="relative z-10 text-center">
                        <h3 class="text-2xl font-bold mb-4">Masih Bingung?</h3>
                        <p class="text-sm text-slate-300 mb-6 leading-relaxed">
                            Jangan ragu untuk bertanya. Tim komunitas kami siap membantu Anda menyelesaikan masalah teknis seputar TV Digital.
                        </p>
                        <a href="https://www.instagram.com/ktvdi.id" target="_blank" class="inline-block w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3.5 rounded-xl transition flex items-center justify-center gap-2 shadow-lg transform hover:-translate-y-1">
                            <i class="fa-brands fa-instagram text-xl"></i> DM Komunitas di Instagram
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const channels = [
            {name: "TVRI Nasional", url: "https://ott-balancer.tvri.go.id/live/eds/Nasional/hls/Nasional.m3u8", cat: "Publik"},
            {name: "TVRI Sport", url: "https://ott-balancer.tvri.go.id/live/eds/Sport/hls/Sport.m3u8", cat: "Olahraga"},
            {name: "Nusantara TV", url: "https://nusantaratv.siar.us/nusantaratv/live/playlist.m3u8", cat: "Berita"},
            {name: "Kompas TV", url: "http://103.46.11.106:9981/stream/channelid/1691704072?ticket=933C4850FCC4D9EE7E8D7D37D095694F55914124&profile=pass", cat: "Berita"},
            {name: "Berita Satu", url: "https://beritasatu.secureswiftcontent.com/han/beritasatu/bsatu10008/srtoutput/manifest.m3u8", cat: "Bisnis"},
            {name: "Garuda TV", url: "https://hgmtv.com:19360/garudatvlivestreaming/garudatvlivestreaming.m3u8", cat: "Umum"},
            {name: "RTV HD", url: "https://rtvstream.rtv.co.id:4555/hls/rtv.m3u8", cat: "Anak"},
            {name: "Bali TV", url: "https://live.balitv.tv/hls/balitv.m3u8", cat: "Budaya"},
            {name: "Semarang TV", url: "http://36.94.24.229/0.m3u8", cat: "Lokal"},
            {name: "JTV Surabaya", url: "https://cctv.jtv.co.id/hls/test.m3u8", cat: "Lokal"},
            {name: "Matrix TV", url: "https://stream.matrixtv.id/hls/stream.m3u8", cat: "Hiburan"},
            {name: "Rasika TV", url: "https://rasika.siar.us/live/rasika.m3u8", cat: "Musik"}
        ];

        const grid = document.getElementById('tv-grid');
        
        channels.forEach((ch, idx) => {
            const div = document.createElement('div');
            div.className = "bg-white rounded-2xl overflow-hidden shadow-sm border border-slate-200 hover:shadow-xl transition group relative";
            div.innerHTML = `
                <div class="relative aspect-video bg-black group-hover:scale-[1.02] transition duration-500">
                    <video id="vid-${idx}" class="w-full h-full object-cover" controls playsinline muted></video>
                    
                    <span class="absolute top-3 left-3 bg-red-600 text-white text-[10px] font-bold px-2 py-1 rounded shadow animate-pulse z-10 flex items-center gap-1">
                        <span class="w-1.5 h-1.5 bg-white rounded-full"></span> LIVE
                    </span>
                </div>
                <div class="p-4 flex items-center justify-between">
                    <div>
                        <h3 class="font-bold text-brand-navy text-sm truncate pr-2">${ch.name}</h3>
                        <div class="flex items-center gap-2 mt-1">
                            <div class="flex items-end gap-[2px] h-3">
                                <span class="w-0.5 bg-brand-blue h-full animate-[pulse_0.8s_ease-in-out_infinite]"></span>
                                <span class="w-0.5 bg-brand-blue h-2/3 animate-[pulse_1.2s_ease-in-out_infinite]"></span>
                                <span class="w-0.5 bg-brand-blue h-full animate-[pulse_1s_ease-in-out_infinite]"></span>
                            </div>
                            <span class="text-[10px] text-slate-400 font-medium">Sedang Memutar</span>
                        </div>
                    </div>
                    <span class="text-[10px] bg-slate-100 px-2 py-1 rounded-md text-slate-500 font-bold border border-slate-200">${ch.cat}</span>
                </div>
            `;
            grid.appendChild(div);

            const video = document.getElementById(`vid-${idx}`);
            if(Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(ch.url);
                hls.attachMedia(video);
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = ch.url;
            }
        });
    });
</script>
{% endblock %}
