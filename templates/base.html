<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{% block title %}KTVDI - Komunitas TV Digital Indonesia{% endblock %}</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='icons/icon-192.png') }}">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] },
                    colors: { brand: { navy: '#0f172a', blue: '#2563eb', sky: '#38bdf8', surface: '#f8fafc' } },
                    animation: { 
                        'marquee': 'marquee 120s linear infinite', 
                    },
                    keyframes: { 
                        marquee: { 
                            '0%': { transform: 'translateX(0%)' }, 
                            '100%': { transform: 'translateX(-50%)' } 
                        } 
                    }
                }
            }
        }
    </script>
    <style>
        .glass-nav { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,255,255,0.08); }
        .chat-bubble-user { background-color: #dbeafe; color: #1e3a8a; border-radius: 12px 0 12px 12px; margin-left: auto; border: 1px solid #bfdbfe; font-size: 13px; }
        .chat-bubble-bot { background-color: #ffffff; color: #334155; border-radius: 0 12px 12px 12px; border: 1px solid #e2e8f0; font-size: 13px; }
        
        @media (max-width: 640px) {
            #chat-window:not(.hidden) { position: fixed !important; inset: 0 !important; width: 100% !important; height: 100% !important; border-radius: 0 !important; z-index: 9999 !important; display: flex; flex-direction: column; }
            #chat-messages { flex: 1; height: auto !important; padding-bottom: 20px; }
        }
        
        .marquee-container { overflow: hidden; white-space: nowrap; position: relative; display: flex; }
        .marquee-content { display: flex; align-items: center; white-space: nowrap; animation: marquee 120s linear infinite; will-change: transform; }
        .marquee-container:hover .marquee-content { animation-play-state: paused; }
        
        .footer-link { transition: all 0.3s ease; display: inline-block; }
        .footer-link:hover { transform: translateX(5px); color: #38bdf8; }
    </style>
</head>
<body class="bg-brand-surface text-slate-800 flex flex-col min-h-screen relative pb-[120px] lg:pb-0">

    <nav class="fixed top-0 w-full z-50 glass-nav transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 md:h-20">
                <a href="/" class="flex items-center gap-3 group shrink-0">
                    <img src="{{ url_for('static', filename='icons/icon-192.png') }}" alt="KTVDI" class="h-8 md:h-9 w-auto filter drop-shadow-md brightness-200">
                </a>
                <div class="hidden lg:flex items-center space-x-8">
                    <a href="/" class="text-sm font-bold text-slate-300 hover:text-white transition-colors">Beranda</a>
                    <a href="/cctv" class="text-sm font-bold text-slate-300 hover:text-white transition-colors">CCTV</a>
                    <a href="/jadwal-sholat" class="text-sm font-bold text-slate-300 hover:text-white transition-colors">Religi</a>
                    <a href="/daftar-siaran" class="text-sm font-bold text-slate-300 hover:text-white transition-colors">Database</a>
                    <a href="/berita" class="text-sm font-bold text-slate-300 hover:text-white transition-colors">Berita</a>
                </div>
                <div class="flex items-center gap-3 md:gap-4">
                    <a href="/about" class="text-slate-400 hover:text-brand-sky mr-2 p-2"><i class="fa-solid fa-circle-info text-xl"></i></a>
                    {% if session.get('user') %}
                        <div class="relative">
                            <button onclick="document.getElementById('profile-dropdown').classList.toggle('hidden')" class="flex items-center gap-2 focus:outline-none">
                                <span class="hidden md:block text-xs font-bold text-white text-right">{{ session.get('nama') }}</span>
                                <img src="https://ui-avatars.com/api/?name={{ session.get('nama') }}&background=2563eb&color=fff&bold=true" class="h-9 w-9 rounded-full border-2 border-slate-700">
                            </button>
                            <div id="profile-dropdown" class="hidden absolute right-0 mt-3 w-48 bg-white rounded-xl shadow-2xl py-2 border border-slate-100 z-50">
                                <a href="/dashboard" class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-50">Dashboard</a>
                                <a href="/logout" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50">Keluar</a>
                            </div>
                        </div>
                    {% else %}
                        <div class="flex items-center gap-2">
                            <a href="/login" class="text-xs font-bold text-slate-300 hover:text-white px-2">Masuk</a>
                            <a href="/register" class="px-4 py-1.5 bg-white text-brand-navy text-xs font-bold rounded-full hover:bg-brand-sky hover:text-white transition">Daftar</a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <main class="flex-grow pt-16 md:pt-20">{% block content %}{% endblock %}</main>

    <footer class="bg-[#0f172a] text-white pt-20 pb-32 lg:pb-16 border-t border-slate-800 font-['Plus_Jakarta_Sans']">
        <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
            <div class="space-y-6">
                <div class="flex items-center gap-3">
                    <img src="{{ url_for('static', filename='icons/icon-192.png') }}" alt="KTVDI Logo" class="h-10 w-auto brightness-200">
                    <span class="text-xl font-extrabold tracking-tight">KTVDI</span>
                </div>
                <p class="text-slate-400 text-sm leading-relaxed">
                    Platform komunitas independen terdepan di Indonesia yang mendedikasikan diri untuk pemerataan informasi penyiaran digital.
                </p>
                <div class="flex gap-4 pt-2">
                    <a href="#" class="w-9 h-9 rounded-full bg-slate-800 flex items-center justify-center hover:bg-blue-600 transition border border-slate-700"><i class="fa-brands fa-facebook-f text-sm"></i></a>
                    <a href="#" class="w-9 h-9 rounded-full bg-slate-800 flex items-center justify-center hover:bg-sky-500 transition border border-slate-700"><i class="fa-brands fa-telegram text-sm"></i></a>
                    <a href="#" class="w-9 h-9 rounded-full bg-slate-800 flex items-center justify-center hover:bg-pink-600 transition border border-slate-700"><i class="fa-brands fa-instagram text-sm"></i></a>
                </div>
            </div>
            <div>
                <h4 class="font-bold mb-6 text-white uppercase tracking-wider text-xs">Menu Utama</h4>
                <ul class="space-y-3 text-sm text-slate-400">
                    <li><a href="/" class="footer-link">Beranda</a></li>
                    <li><a href="/daftar-siaran" class="footer-link">Database MUX</a></li>
                    <li><a href="/cctv" class="footer-link">Pantauan CCTV</a></li>
                    <li><a href="/berita" class="footer-link">Berita Terkini</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold mb-6 text-white uppercase tracking-wider text-xs">Dukungan</h4>
                <ul class="space-y-3 text-sm text-slate-400">
                    <li><a href="/about" class="footer-link">Tentang Kami</a></li>
                    <li><a href="#" class="footer-link">Pusat Bantuan</a></li>
                    <li><a href="#" class="footer-link">Kebijakan Privasi</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold mb-6 text-white uppercase tracking-wider text-xs">Hubungi Kami</h4>
                <ul class="space-y-4 text-sm text-slate-400">
                    <li class="flex items-start gap-3">
                        <i class="fa-solid fa-envelope mt-1 text-brand-sky"></i>
                        <span>kom.tvdigitalid@gmail.com</span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-slate-500">
            <p>&copy; 2026 Komunitas TV Digital Indonesia. Hak Cipta Dilindungi Undang-Undang.</p>
            <div class="flex gap-6"><a href="#" class="hover:text-white">Syarat & Ketentuan</a><a href="#" class="hover:text-white">Disclaimer</a></div>
        </div>
    </footer>

    <nav class="lg:hidden fixed bottom-0 w-full bg-white z-[60] pb-safe border-t border-slate-200 shadow-lg">
        <div class="grid grid-cols-5 h-[65px] items-center px-2">
            <a href="/" class="flex flex-col items-center justify-center gap-1 text-slate-400 hover:text-brand-blue group"><i class="fa-solid fa-house text-lg"></i><span class="text-[9px] font-bold">Beranda</span></a>
            <a href="/cctv" class="flex flex-col items-center justify-center gap-1 text-slate-400 hover:text-brand-blue group"><i class="fa-solid fa-video text-lg"></i><span class="text-[9px] font-bold">CCTV</span></a>
            <a href="/jadwal-sholat" class="flex flex-col items-center justify-center -mt-6 group"><div class="w-12 h-12 rounded-full bg-brand-blue text-white flex items-center justify-center border-4 border-white shadow-lg"><i class="fa-solid fa-mosque text-lg"></i></div><span class="text-[9px] font-bold mt-1">Religi</span></a>
            <a href="/daftar-siaran" class="flex flex-col items-center justify-center gap-1 text-slate-400 hover:text-brand-blue group"><i class="fa-solid fa-database text-lg"></i><span class="text-[9px] font-bold">Data</span></a>
            <a href="/berita" class="flex flex-col items-center justify-center gap-1 text-slate-400 hover:text-brand-blue group"><i class="fa-solid fa-newspaper text-lg"></i><span class="text-[9px] font-bold">Berita</span></a>
        </div>
    </nav>

    <div class="fixed bottom-[65px] lg:bottom-0 w-full z-40 bg-white border-t border-slate-200 h-9 lg:h-10 flex items-center justify-between px-0 select-none shadow-sm">
        <div class="bg-brand-blue h-full flex items-center px-3 z-20 shrink-0"><span class="text-white text-[9px] font-extrabold uppercase tracking-widest flex items-center gap-2"><span class="w-1.5 h-1.5 bg-white rounded-full animate-pulse"></span> LIVE INFO</span></div>
        <div class="flex-1 overflow-hidden h-full flex items-center relative bg-slate-50 marquee-container">
            <div class="marquee-content text-[10px] font-semibold text-slate-700 flex items-center gap-0" id="unified-ticker">
                <span class="px-4">Memuat Berita...</span>
            </div>
        </div>
        <div class="bg-white h-full flex items-center px-3 border-l border-slate-200 z-20 shrink-0"><div class="text-[10px] font-mono font-bold text-slate-800" id="clock">00:00</div></div>
    </div>

    <div class="fixed bottom-[110px] lg:bottom-20 left-4 z-[60] group">
        <a href="tel:112" class="flex items-center gap-2 bg-red-600/90 backdrop-blur-sm hover:bg-red-700 text-white p-3 rounded-full shadow-lg ring-2 ring-red-500/20 w-10 group-hover:w-auto overflow-hidden transition-all duration-300">
            <i class="fa-solid fa-phone-volume text-sm animate-pulse"></i><span class="font-bold text-[10px] whitespace-nowrap hidden group-hover:inline pl-1">DARURAT 112</span>
        </a>
    </div>

    <div class="fixed bottom-[110px] lg:bottom-20 right-4 z-[60]">
        <div id="chat-window" class="hidden w-[90vw] max-w-[350px] bg-white rounded-2xl shadow-2xl overflow-hidden mb-2 transform origin-bottom-right transition-all border border-slate-200 flex flex-col">
            <div class="bg-brand-blue p-3 flex justify-between items-center text-white shadow-md relative z-20 shrink-0">
                <div class="flex items-center gap-3">
                    <img src="https://iili.io/f87Ctjt.md.png" class="h-9 w-9 rounded-full bg-white p-0.5 border border-white/50">
                    <div><div class="font-bold text-sm">Modi - AI KTVDI</div><div class="text-[10px] text-blue-100 flex items-center gap-1"><span class="w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"></span> Online</div></div>
                </div>
                <button onclick="toggleChat()" class="text-white hover:text-red-200"><i class="fa-solid fa-xmark text-lg"></i></button>
            </div>
            <div id="chat-messages" class="h-80 sm:h-80 chat-bg p-4 overflow-y-auto flex flex-col chat-scroll text-sm space-y-3 relative z-10">
                <div class="flex gap-2">
                    <div class="chat-bubble-bot p-3 shadow-sm max-w-[85%] text-slate-800 leading-relaxed relative">
                        Halo Kak! ðŸ‘‹ Ada yang bisa Modi bantu hari ini? ðŸ˜Š
                    </div>
                </div>
            </div>
            <div class="p-2 bg-white border-t border-slate-200 relative z-20 shrink-0">
                <form onsubmit="handleChat(event)" class="flex gap-2 items-center">
                    <input type="text" id="chat-input" placeholder="Ketik pesan..." class="w-full bg-slate-50 text-sm px-4 py-3 rounded-full focus:outline-none border border-slate-200 shadow-sm" autocomplete="off">
                    <button type="submit" class="bg-brand-blue text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-blue-700 transition shadow-md"><i class="fa-solid fa-paper-plane text-sm"></i></button>
                </form>
            </div>
        </div>
        <button onclick="toggleChat()" class="w-14 h-14 bg-brand-blue text-white rounded-full shadow-xl flex items-center justify-center hover:scale-110 transition active:scale-95 border-2 border-white p-1 overflow-hidden relative group">
             <img src="https://iili.io/f87Ctjt.md.png" class="w-full h-full object-cover rounded-full">
             <span class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white text-[9px] flex items-center justify-center font-bold animate-bounce">1</span>
        </button>
    </div>

    <script>
        function toggleProfile() { document.getElementById('profile-dropdown').classList.toggle('hidden'); }
        function toggleChat() { 
            const win = document.getElementById('chat-window');
            win.classList.toggle('hidden');
            if(!win.classList.contains('hidden')){ setTimeout(() => document.getElementById('chat-messages').scrollTop = 9999, 100); }
        }

        // JAM DIGITAL (REAL-TIME)
        setInterval(() => { 
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('id-ID', {hour:'2-digit', minute:'2-digit', second:'2-digit'}).replace('.',':'); 
        }, 1000);
        
        // RUNNING TEXT (SEAMLESS & FALLBACK)
        async function updateTicker() {
            try { 
                const res = await fetch('/api/news-ticker'); 
                const d = await res.json(); 
                
                if (d && d.length > 0) {
                    const content = d.map(n=>`<span class="mx-6 text-brand-blue font-bold tracking-wide">TERKINI:</span> <span class="uppercase text-slate-800 font-semibold tracking-wide whitespace-nowrap">${n}</span><span class="mx-6 text-slate-300">|</span>`).join('');
                    // Duplikasi 4x agar animasi mulus tanpa putus
                    document.getElementById('unified-ticker').innerHTML = content + content + content + content;
                } else {
                    document.getElementById('unified-ticker').innerHTML = '<span class="mx-6">Selamat Datang di KTVDI - Pantau Informasi TV Digital Terkini</span>';
                }
            } catch(e) {
                console.log("Ticker Error, pakai default");
                document.getElementById('unified-ticker').innerHTML = '<span class="mx-6">Selamat Datang di KTVDI - Pantau Informasi TV Digital Terkini</span>';
            }
        }
        updateTicker();
        
        async function handleChat(e){ 
            e.preventDefault(); const i=document.getElementById('chat-input'), t=i.value.trim(); if(!t)return;
            addMsg(t,'user'); i.value='';
            const load=document.createElement('div'); load.className="flex gap-2 bot-load"; load.innerHTML=`<div class="chat-bubble-bot p-3 text-slate-400 italic text-xs">Modi mengetik...</div>`;
            document.getElementById('chat-messages').appendChild(load);
            try {
                // PANGGIL API BARU (/api/chat)
                const r=await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt:t})});
                const d=await r.json();
                document.querySelector('.bot-load').remove();
                addMsg(d.response,'bot');
            } catch {
                document.querySelector('.bot-load').remove();
                addMsg("Maaf Kak, Modi sedang sibuk. Coba lagi nanti ya.",'bot');
            }
        }
        function addMsg(t,s){
            const d=document.createElement('div'); d.className="flex gap-2";
            const tm=new Date().toLocaleTimeString('id-ID',{hour:'2-digit',minute:'2-digit'});
            d.innerHTML = s=='user' ? `<div class="chat-bubble-user p-3 shadow-sm max-w-[85%] relative">${t}<div class="text-[9px] text-blue-300 text-right mt-1">${tm} âœ“âœ“</div></div>` : `<div class="chat-bubble-bot p-3 shadow-sm max-w-[85%] relative">${t.replace(/\n/g,'<br>')}<div class="text-[9px] text-slate-400 text-right mt-1">${tm}</div></div>`;
            document.getElementById('chat-messages').appendChild(d);
            document.getElementById('chat-messages').scrollTop = 9999;
        }
    </script>
</body>
</html>

### 3. `templates/index.html` (Complete Home Page)

```html
{% extends 'base.html' %}

{% block content %}
<style>
    @import url('[https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap](https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap)');
    .font-youtube { font-family: 'Roboto', sans-serif; }
    
    /* Glossy Text Effect */
    .text-glossy-effect { 
        background: linear-gradient(to right, #0f172a 0%, #2563eb 20%, #ffffff 50%, #2563eb 80%, #0f172a 100%); 
        background-size: 200% auto; 
        -webkit-background-clip: text; 
        -webkit-text-fill-color: transparent; 
        animation: textShine 3s linear infinite; 
        font-weight: 800; 
    }
    @keyframes textShine { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }
    
    /* Marquee Card Animation */
    @keyframes marqueeCard { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
    .animate-marquee-card { display: inline-block; white-space: nowrap; animation: marqueeCard 30s linear infinite; padding-left: 100%; }
    
    /* Play Button Pulse */
    .play-btn-pulse { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7); animation: pulse-blue 2s infinite; }
    @keyframes pulse-blue { 0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7); } 70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); } 100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); } }
</style>

<section class="relative bg-white pt-32 pb-20 overflow-hidden font-['Plus_Jakarta_Sans']">
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="flex flex-col lg:flex-row items-center gap-16">
            <div class="flex-1 text-center lg:text-left">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-blue-50 border border-blue-100 text-brand-blue text-xs font-bold rounded-full mb-6 shadow-sm">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> Revolusi Penyiaran Indonesia
                </div>
                <h1 class="text-4xl md:text-6xl font-extrabold text-brand-navy leading-tight mb-6 tracking-tight">
                    Selamat Datang di <br> <span class="text-glossy-effect">Komunitas TV Digital</span>
                </h1>
                <p class="text-slate-500 text-lg mb-8 max-w-2xl mx-auto lg:mx-0 leading-relaxed text-justify">
                    Kami hadir sebagai wadah independen yang menjembatani masyarakat Indonesia menuju era penyiaran digital yang canggih. KTVDI berkomitmen menyediakan data frekuensi MUX akurat, panduan teknis yang mudah dipahami, serta forum diskusi solutif agar setiap keluarga dapat menikmati hak siaran televisi yang bersih, jernih, dan gratis tanpa terkendala.
                </p>
                <div class="flex flex-wrap gap-4 justify-center lg:justify-start">
                    <a href="/daftar-siaran" class="px-8 py-4 bg-brand-blue text-white font-bold rounded-xl shadow-lg hover:bg-blue-700 transition flex items-center gap-2 transform hover:-translate-y-1">
                        <i class="fa-solid fa-tower-broadcast"></i> Cek Sinyal Digital
                    </a>
                    {% if not session.get('user') %}
                    <a href="/register" class="px-8 py-4 bg-white border border-slate-200 text-brand-navy font-bold rounded-xl hover:border-brand-blue hover:text-brand-blue transition flex items-center gap-2">
                        <i class="fa-solid fa-user-plus"></i> Gabung Komunitas
                    </a>
                    {% endif %}
                </div>
            </div>
            
            <div class="flex-1 w-full max-w-md">
                <div class="bg-white p-8 rounded-3xl shadow-2xl border border-slate-100 relative">
                    <div class="grid grid-cols-2 gap-6 text-center mb-8">
                        <div>
                            <div class="text-3xl font-extrabold text-brand-navy">{{ stats.wilayah if stats else 0 }}</div>
                            <div class="text-[10px] text-slate-400 font-bold uppercase mt-1 tracking-wider">Wilayah</div>
                        </div>
                        <div>
                            <div class="text-3xl font-extrabold text-brand-navy">{{ stats.mux if stats else 0 }}</div>
                            <div class="text-[10px] text-slate-400 font-bold uppercase mt-1 tracking-wider">MUX</div>
                        </div>
                    </div>
                    <div class="bg-brand-navy p-8 rounded-2xl text-center text-white relative overflow-hidden">
                        <div class="relative z-10">
                            <div class="text-6xl font-extrabold text-brand-sky">{{ stats.channel if stats else 0 }}</div>
                            <div class="text-xs text-slate-300 font-bold uppercase mt-2 tracking-[0.2em]">Total Channel</div>
                        </div>
                    </div>
                    <div class="text-center mt-6 text-[10px] text-slate-400">
                        Update Terakhir: <span class="font-bold text-brand-blue">{{ last_updated_time }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-20 border-y border-slate-800 relative overflow-hidden" style="background: radial-gradient(circle at center, #0f172a 0%, #020617 100%);">
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="text-center mb-12">
            <span class="text-brand-sky font-bold text-[10px] uppercase tracking-[0.2em] bg-slate-800/80 px-3 py-1.5 rounded-full border border-slate-700 backdrop-blur-sm shadow-lg">Official Stream</span>
            <h2 class="text-3xl md:text-4xl font-extrabold text-white mt-4 tracking-tight font-youtube">Nonton Siaran Nasional</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="tv-grid"></div>
    </div>
</section>

<section class="py-24 bg-slate-50 border-b border-slate-200 font-['Plus_Jakarta_Sans']">
    <div class="max-w-6xl mx-auto px-4">
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
            <div class="bg-white p-8 rounded-3xl shadow-lg border border-slate-100 flex flex-col items-center text-center gap-4 hover:-translate-y-2 transition duration-300 group">
                <div class="w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition"><i class="fa-solid fa-tv text-2xl"></i></div>
                <h3 class="text-xl font-bold text-brand-navy">1. Bersih Gambarnya</h3>
                <p class="text-slate-500 text-sm leading-relaxed">Teknologi DVB-T2 menjamin gambar diterima jernih tanpa semut atau bayangan meskipun cuaca buruk.</p>
            </div>
            
            <div class="bg-white p-8 rounded-3xl shadow-lg border border-slate-100 flex flex-col items-center text-center gap-4 hover:-translate-y-2 transition duration-300 group">
                <div class="w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center text-purple-600 group-hover:bg-purple-600 group-hover:text-white transition"><i class="fa-solid fa-tower-cell text-2xl"></i></div>
                <h3 class="text-xl font-bold text-brand-navy">2. Canggih Teknologinya (MUX)</h3>
                <p class="text-slate-500 text-sm leading-relaxed">Satu frekuensi bisa memuat hingga 12 channel TV (MUX), membuat spektrum frekuensi jauh lebih efisien.</p>
            </div>

            <div class="bg-white p-8 rounded-3xl shadow-lg border border-slate-100 flex flex-col items-center text-center gap-4 hover:-translate-y-2 transition duration-300 group">
                <div class="w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center text-green-600 group-hover:bg-green-600 group-hover:text-white transition"><i class="fa-solid fa-wallet text-2xl"></i></div>
                <h3 class="text-xl font-bold text-brand-navy">3. Gratis Selamanya</h3>
                <p class="text-slate-500 text-sm leading-relaxed">Bukan streaming internet, bukan langganan bulanan. Cukup beli STB DVB-T2 sekali, gratis selamanya.</p>
            </div>
        </div>

        <div class="space-y-6 max-w-4xl mx-auto">
            <h3 class="text-center text-2xl font-bold text-brand-navy mb-8">Paling Sering Ditanyakan</h3>
            
            <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition">
                <h4 class="font-bold text-brand-blue text-lg mb-2 flex items-center gap-2"><i class="fa-solid fa-trophy"></i> Cara Nonton Piala Dunia 2026?</h4>
                <p class="text-slate-600 text-sm leading-relaxed text-justify">
                    Hak siar resmi Piala Dunia 2026 dipegang oleh <strong>TVRI</strong> (TVRI Nasional & TVRI Sport). Anda bisa menonton seluruh pertandingan secara <strong>GRATIS</strong> dan kualitas <strong>HD</strong> melalui siaran TV Digital menggunakan antena UHF biasa. Tidak perlu berlangganan atau kuota internet. Pastikan arah antena Anda tepat ke pemancar TVRI terdekat.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition">
                    <h4 class="font-bold text-slate-800 mb-2">Panduan Pasang Antena</h4>
                    <ul class="text-slate-500 text-sm list-disc pl-4 space-y-1">
                        <li>Gunakan antena Outdoor untuk hasil maksimal.</li>
                        <li>Pakai kabel koaksial RG6 berkualitas.</li>
                        <li>Arahkan antena ke pemancar MUX terdekat.</li>
                        <li>Hindari halangan gedung/pohon tinggi.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition">
                    <h4 class="font-bold text-slate-800 mb-2">Cara Scan Ulang STB</h4>
                    <ol class="text-slate-500 text-sm list-decimal pl-4 space-y-1">
                        <li>Tekan tombol MENU di remote STB.</li>
                        <li>Pilih Pencarian Saluran (Search).</li>
                        <li>Pilih Pencarian Otomatis (Auto Scan).</li>
                        <li>Tunggu hingga 100% selesai.</li>
                    </ol>
                </div>
            </div>

            <details class="group bg-white p-4 rounded-xl border border-slate-200 cursor-pointer">
                <summary class="font-bold text-slate-700 flex justify-between items-center">Apa itu MUX? <span><i class="fa-solid fa-chevron-down text-brand-blue"></i></span></summary>
                <div class="mt-4 text-slate-500 text-sm leading-relaxed border-t pt-4 text-justify">
                    <strong>MUX (Multiplexing)</strong> adalah teknologi penggabungan beberapa saluran TV digital dalam satu paket frekuensi siaran. Contoh: Dalam satu kanal MUX TVRI (misal kanal 43 UHF), bisa terdapat TVRI Nasional, TVRI Sport, TVRI World, dan TV lokal lainnya. Ini membuat penggunaan frekuensi jauh lebih hemat.
                </div>
            </details>
        </div>

        <div class="bg-brand-navy rounded-3xl p-10 md:p-12 text-white relative overflow-hidden flex flex-col md:flex-row items-center justify-between gap-8 shadow-2xl mt-16">
            <div class="relative z-10 max-w-lg text-center md:text-left">
                <h2 class="text-2xl font-bold mb-3">Butuh Bantuan Lebih Lanjut?</h2>
                <p class="text-slate-300 leading-relaxed">Bergabunglah dengan ribuan anggota komunitas kami di grup diskusi untuk mendapatkan solusi teknis secara real-time.</p>
            </div>
            <a href="[https://www.facebook.com/share/g/18CKU4FayC/](https://www.facebook.com/share/g/18CKU4FayC/)" target="_blank" class="relative z-10 px-8 py-4 bg-white text-brand-navy font-bold rounded-xl hover:bg-slate-100 transition shadow-lg flex items-center gap-3 transform hover:scale-105">
                <i class="fa-brands fa-facebook text-xl"></i> Grup Facebook KTVDI
            </a>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const channels = [
            {name: "Caruban TV", url: "[https://stream.carubantv.id/hls/stream.m3u8](https://stream.carubantv.id/hls/stream.m3u8)", logo: "[https://iili.io/f8YnXh7.png](https://iili.io/f8YnXh7.png)"},
            {name: "Rasika TV", url: "[https://rasika.siar.us/live/rasika.m3u8](https://rasika.siar.us/live/rasika.m3u8)", logo: "[https://rasika.siar.us/assets/img/logo.png](https://rasika.siar.us/assets/img/logo.png)"},
            {name: "Stara TV Malang", url: "[https://malang.staratv.id/hls/stream.m3u8](https://malang.staratv.id/hls/stream.m3u8)", logo: "[https://iili.io/f8YVekl.md.png](https://iili.io/f8YVekl.md.png)"},
            {name: "TVRI Nasional", url: "[https://ott-balancer.tvri.go.id/live/eds/Nasional/hls/Nasional.m3u8](https://ott-balancer.tvri.go.id/live/eds/Nasional/hls/Nasional.m3u8)", logo: "[https://iili.io/f87NRoB.md.png](https://iili.io/f87NRoB.md.png)"},
            {name: "RTV HD", url: "[https://rtvstream.rtv.co.id:4555/hls/rtv.m3u8](https://rtvstream.rtv.co.id:4555/hls/rtv.m3u8)", logo: "[https://iili.io/f876F44.md.png](https://iili.io/f876F44.md.png)"},
            {name: "Kompas TV", url: "[https://www.youtube.com/embed/live_stream?channel=UC7tV3Qv0K6z7q9Z7X1x9x9g](https://www.youtube.com/embed/live_stream?channel=UC7tV3Qv0K6z7q9Z7X1x9x9g)", type: "youtube", logo: "[https://iili.io/f8YFc1R.jpg](https://iili.io/f8YFc1R.jpg)"},
            {name: "Garuda TV", url: "[https://hgmtv.com:19360/garudatvlivestreaming/garudatvlivestreaming.m3u8](https://hgmtv.com:19360/garudatvlivestreaming/garudatvlivestreaming.m3u8)", logo: "[https://iili.io/f8Y7QV4.png](https://iili.io/f8Y7QV4.png)"},
            {name: "Nusantara TV", url: "[https://nusantaratv.siar.us/nusantaratv/live/playlist.m3u8](https://nusantaratv.siar.us/nusantaratv/live/playlist.m3u8)", logo: "[https://iili.io/f8YIZPt.jpg](https://iili.io/f8YIZPt.jpg)"},
            {name: "Berita Satu", url: "[https://beritasatu.secureswiftcontent.com/han/beritasatu/bsatu10008/srtoutput/manifest.m3u8](https://beritasatu.secureswiftcontent.com/han/beritasatu/bsatu10008/srtoutput/manifest.m3u8)", logo: "[https://iili.io/f878bP2.jpg](https://iili.io/f878bP2.jpg)"},
            {name: "Matrix TV Jogja", url: "[https://stream.matrixtv.id/hls/stream.m3u8](https://stream.matrixtv.id/hls/stream.m3u8)", logo: "[https://iili.io/f87LXWX.md.png](https://iili.io/f87LXWX.md.png)"},
            {name: "Semarang TV", url: "[http://36.94.24.229/0.m3u8](http://36.94.24.229/0.m3u8)", logo: "[https://iili.io/f87yF6P.png](https://iili.io/f87yF6P.png)"}
        ];

        const grid = document.getElementById('tv-grid');
        
        channels.forEach((ch, idx) => {
            const div = document.createElement('div');
            div.className = "bg-transparent group";
            
            let playerHtml = '';
            
            if (ch.type === "youtube") {
                playerHtml = `
                    <iframe src="[https://www.youtube.com/embed/DOOrIxw5xOw?autoplay=0&mute=0&controls=1](https://www.youtube.com/embed/DOOrIxw5xOw?autoplay=0&mute=0&controls=1)" 
                        class="w-full h-full absolute inset-0 object-cover rounded-t-xl" 
                        frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
                    </iframe>`;
            } else {
                playerHtml = `
                    <div class="absolute inset-0 z-20 flex items-center justify-center bg-black/40 cursor-pointer group-video-placeholder group-hover:bg-black/20 transition" onclick="loadHLS(this, '${ch.url}', 'vid-${idx}')">
                        <div class="w-16 h-16 rounded-full bg-brand-blue/90 backdrop-blur-md flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform ring-4 ring-white/10 play-btn-pulse">
                            <i class="fa-solid fa-play text-white text-2xl ml-1"></i>
                        </div>
                    </div>
                    <div class="loading-spinner absolute inset-0 flex flex-col items-center justify-center bg-[#0f0f0f] z-10 hidden rounded-t-xl">
                        <i class="fa-solid fa-circle-notch fa-spin text-white text-3xl"></i>
                    </div>
                    <video id="vid-${idx}" class="w-full h-full object-cover rounded-t-xl" muted playsinline></video>
                    
                    <div class="absolute inset-0 z-30 flex flex-col justify-end p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none bg-gradient-to-t from-black/60 via-transparent to-transparent rounded-t-xl">
                        <div class="flex justify-between items-end pointer-events-auto">
                            <div class="flex gap-2">
                                <button onclick="toggleMute('vid-${idx}', this)" class="w-8 h-8 rounded-full bg-black/40 hover:bg-brand-blue text-white flex items-center justify-center backdrop-blur-sm border border-white/10"><i class="fa-solid fa-volume-high text-xs"></i></button>
                                <button onclick="stopVideo('vid-${idx}')" class="w-8 h-8 rounded-full bg-black/40 hover:bg-red-500 text-white flex items-center justify-center backdrop-blur-sm border border-white/10"><i class="fa-solid fa-stop text-xs"></i></button>
                                <button onclick="reloadVideo('vid-${idx}', '${ch.url}')" class="w-8 h-8 rounded-full bg-black/40 hover:bg-green-500 text-white flex items-center justify-center backdrop-blur-sm border border-white/10"><i class="fa-solid fa-rotate-right text-xs"></i></button>
                            </div>
                            <button onclick="toggleFullScreen('vid-${idx}')" class="w-8 h-8 rounded-full bg-black/40 hover:bg-brand-blue text-white flex items-center justify-center backdrop-blur-sm border border-white/10"><i class="fa-solid fa-expand text-xs"></i></button>
                        </div>
                    </div>
                `;
            }

            div.innerHTML = `
                <div class="relative aspect-video bg-[#1e293b] rounded-t-xl overflow-hidden shadow-lg border border-white/5 group">
                    ${playerHtml}
                </div>
                
                <div class="bg-blue-900/50 backdrop-blur-sm border-t border-b border-white/10 h-7 flex items-center overflow-hidden relative">
                    <div class="absolute left-0 bg-blue-700 h-full px-2 flex items-center z-10 shadow-md">
                        <span class="text-[9px] font-bold text-white tracking-wider">INFO</span>
                    </div>
                    <div class="w-full h-full flex items-center">
                        <div class="animate-marquee-card text-[10px] text-blue-100 font-medium pl-4">
                            Saksikan siaran ${ch.name} kualitas HD di TV Digital. Kami bangga memperkenalkan siaran TV Digital ke kalangan Gen Z agar melek teknologi. Gratis selamanya tanpa kuota internet!
                        </div>
                    </div>
                </div>

                <div class="flex items-center gap-3 bg-[#0f172a] rounded-b-xl p-4 border-x border-b border-white/5">
                    <img src="${ch.logo}" class="w-9 h-9 rounded-full bg-white p-0.5 object-contain border border-slate-600" onerror="this.src='{{ url_for('static', filename='icons/icon-192.png') }}'">
                    <div>
                        <h3 class="text-white text-sm font-bold font-youtube leading-tight">${ch.name}</h3>
                        <div class="text-[10px] text-gray-400 font-youtube flex items-center gap-1.5 mt-0.5">
                            <span class="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"></span> LIVE
                        </div>
                    </div>
                </div>
            `;
            grid.appendChild(div);
        });
    });

    function loadHLS(placeholder, url, vidId) {
        const video = document.getElementById(vidId);
        const spinner = placeholder.nextElementSibling;
        
        placeholder.style.display = 'none';
        spinner.classList.remove('hidden');

        if(Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(url);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, () => {
                video.play();
                spinner.classList.add('hidden');
            });
            window['hls_'+vidId] = hls; // Simpan instance
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = url;
            video.addEventListener('loadedmetadata', () => {
                video.play();
                spinner.classList.add('hidden');
            });
        }
        video.muted = false;
    }

    function toggleMute(id, btn) {
        const v = document.getElementById(id);
        v.muted = !v.muted;
        btn.innerHTML = v.muted ? '<i class="fa-solid fa-volume-xmark text-xs"></i>' : '<i class="fa-solid fa-volume-high text-xs"></i>';
    }

    function stopVideo(id) {
        const v = document.getElementById(id);
        v.pause();
    }

    function reloadVideo(id, url) {
        const v = document.getElementById(id);
        v.pause();
        if(window['hls_'+id]) {
            window['hls_'+id].loadSource(url);
            window['hls_'+id].attachMedia(v);
            v.play();
        }
    }

    function toggleFullScreen(id) {
        const v = document.getElementById(id);
        if (v.requestFullscreen) v.requestFullscreen();
    }
</script>
{% endblock %}
